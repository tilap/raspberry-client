{"version":3,"sources":["../src/screen.js"],"names":[],"mappings":";;;;;;QAiBgB,E,GAAA,E;QAQA,G,GAAA,G;;AAzBhB;;;;AACA;;AACA;;AACA;;IAAY,O;;;;;;AAEZ,MAAM,SAAS,0BAAW,YAAX,CAAf;;AAEO,IAAI,kDAAqB,OAAzB;AACP,OAAO,IAAP,CAAY,MAAZ,EAAoB,EAAE,sCAAF,EAApB;;;;;AAKA,SAAS,KAAT,GAAiB;AACb,WAAO,wBAAU,aAAV,EAAyB,CAAC,OAAD,CAAzB,CAAP;AACH;;AAEM,SAAS,EAAT,GAAc;AACjB,WAAO,IAAP,CAAY,mBAAZ;AACA,4BAAU,aAAV,EAAyB,CAAC,IAAD,CAAzB;AACA,YAbO,kBAaP,wBAAqB,IAArB;AACA,4BAAW,EAAE,aAAa,kBAAf,EAAX;AACA,YAAQ,KAAR;AACH;;AAEM,SAAS,GAAT,GAAe;AAClB,WAAO,IAAP,CAAY,oBAAZ;AACA,4BAAU,aAAV,EAAyB,CAAC,KAAD,CAAzB;AACA,YArBO,kBAqBP,wBAAqB,KAArB;AACA,4BAAW,EAAE,aAAa,kBAAf,EAAX;AACA,YAAQ,IAAR;AACH;;AAED,IAAI,uBAAuB,IAA3B,EAAiC;AAC7B,YAAQ,KAAR;AACH","file":"screen.js","sourcesContent":["import Logger from 'nightingale';\nimport { runScript } from './scripts';\nimport { sendUpdate } from './client';\nimport * as display from './display';\n\nconst logger = new Logger('app.screen');\n\nexport let currentScreenState = state();\nlogger.info('init', { currentScreenState });\n\n/**\n * @returns {string} on|off|unavailable\n */\nfunction state() {\n    return runScript('./screen.sh', ['state']);\n}\n\nexport function on() {\n    logger.info('turning screen on');\n    runScript('./screen.sh', ['on']);\n    currentScreenState = 'on';\n    sendUpdate({ screenState: currentScreenState });\n    display.start();\n}\n\nexport function off() {\n    logger.info('turning screen off');\n    runScript('./screen.sh', ['off']);\n    currentScreenState = 'off';\n    sendUpdate({ screenState: currentScreenState });\n    display.stop();\n}\n\nif (currentScreenState === 'on') {\n    display.start();\n}\n"]}