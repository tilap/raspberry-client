{"version":3,"sources":["../src/migrate.js"],"names":[],"mappings":";;;;;kBAIwB,O;;AAJxB;;AAEA;;AAEe,SAAS,OAAT,CAAiB,eAAjB,EAA0C,UAA1C,EAA8D;AAAA,iBAA7C,eAA6C;AAAA,+HAA7C,eAA6C;AAAA;;AAAA,iBAApB,UAAoB;AAAA,0HAApB,UAAoB;AAAA;;AACzE,WAAO,IAAI,OAAJ,CAAY,CAAC,OAAD,EAAU,MAAV,KAAqB;AACpC,yBAAQ,CAAC,AAAD,GAAG,SAAH,EAAa,YAAb,CAAR,EAAoC,CAAC,GAAD,EAAM,KAAN,KAAgB;AAChD,gBAAI,GAAJ,EAAS;AACL,uBAAO,OAAO,GAAP,CAAP;AACH;;AAED,kBACK,MADL,CACY;AAAA,uBAAQ,KAAK,KAAL,CAAW,CAAC,CAAZ,MAAmB,KAA3B;AAAA,aADZ,EAEK,GAFL,CAES;AAAA,uBAAS,EAAE,UAAF,EAAQ,SAAS,mBAAmB,IAAnB,CAAwB,IAAxB,EAA8B,CAA9B,CAAjB,EAAT;AAAA,aAFT,EAGK,MAHL,CAGY;AAAA,uBAAQ,gBAAG,KAAK,OAAR,EAAiB,eAAjB,CAAR;AAAA,aAHZ,EAIK,IAJL,CAIU,CAAC,CAAD,EAAI,CAAJ;AAAA,uBAAU,gBAAG,EAAE,OAAL,EAAc,EAAE,OAAhB,CAAV;AAAA,aAJV,EAKK,OALL,CAKa,QAAQ;AACb,wBAAQ,GAAR,CAAY,IAAZ;;AAEH,aARL;AASH,SAdD;AAeH,KAhBM,CAAP;AAiBH","file":"migrate.js","sourcesContent":["import { gt, lt } from 'semver';\n// import { runScript } from 'scripts';\nimport { readdir } from 'fs';\n\nexport default function migrate(previousVersion: string, newVersion: string) {\n    return new Promise((resolve, reject) => {\n        readdir(`${__dirname}/../migrate/`, (err, files) => {\n            if (err) {\n                return reject(err);\n            }\n\n            files\n                .filter(file => file.slice(-3) === '.sh')\n                .map(file => ({ file, version: /([^_]+)(_.*).sh$/.exec(file)[1] }))\n                .filter(file => lt(file.version, previousVersion))\n                .sort((a, b) => gt(a.version, b.version))\n                .forEach(file => {\n                    console.log(file);\n                    // runScript(file.file, [], { cwd: `${__dirname}/../migrate/` });\n                });\n        });\n    });\n}\n"]}