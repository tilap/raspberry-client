{"version":3,"sources":["../src/config.js"],"names":[],"mappings":";;;;;QAmCgB;QAUA;QAIA;;;;;;;;;;;;;;;;;;;;AA5ChB,MAAM,iBAAiB,CAAC,GAAE,SAAH,EAAa,oBAAb,CAAjB;AACN,IAAI,SAAS,CAAC,MAAM;AAChB,QAAI;AACA,eAAO,KAAK,KAAL,CAAW,sBAAa,cAAb,CAAX,CAAP,CADA;KAAJ,CAEE,OAAO,GAAP,EAAY;AACV,cAAM,mBAAmB,CAAC,MAAM;AAC5B,gBAAI;AACA,uBAAO,iCAAP,CADA;aAAJ,CAEE,OAAO,GAAP,EAAY;AACV,uBAAO,IAAP,CADU;aAAZ;SAHoB,CAAD,EAAnB,CADI;AAQV,eAAO;AACH,qBAAS,OAAT;AACA,iBAAK,CAAC,aAAD,EAAQ,cAAR,GAAwB,oBAAoB,iBAAiB,EAAjB,EAAoB,CAArE;SAFJ,CARU;KAAZ;CAHQ,CAAD,EAAT;;AAmBJ,IAAI,CAAC,cAAD,EAAiB,OAAjB,EAA0B,UAA1B,EAAsC,OAAtC,CAA8C,OAAO,OAAP,CAA9C,KAAkE,CAAC,CAAD,EAAI;AACtE,WAAO,OAAP,GAAiB,OAAjB,CADsE;AAEtE,WAFsE;CAA1E;;;;EAMA,SAAS,IAAT,GAAgB;AACZ,2BAAc,cAAd,EAA8B,KAAK,SAAL,CAAe,MAAf,EAAuB,IAAvB,EAA6B,CAA7B,CAA9B,EADY;CAAhB;;;;;EAIO,SAAS,YAAT,CAAsB,SAAtB,EAAiC;AACpC,QAAI,yBAAU,MAAV,EAAkB,SAAlB,CAAJ,EAAkC;AAC9B,eAAO,KAAP,CAD8B;KAAlC;;AAIA,aAAS,SAAT,CALoC;AAMpC,WANoC;AAOpC,WAAO,IAAP,CAPoC;CAAjC;;;;EAUA,SAAS,OAAT,GAAmB;AACtB,WAAO,OAAO,IAAP,CADe;CAAnB;;;;EAIA,SAAS,GAAT,GAAe;AAClB,WAAO,MAAP,CADkB;CAAf","file":"config.js","sourcesContent":["import { readFileSync, writeFileSync } from 'fs';\nimport deepEqual from 'deep-equal';\nimport { host } from './argv';\nimport findNetworkInterface from './networkInterface';\n\nconst configFilename = `${__dirname}/../data/config.json`;\nlet config = (() => {\n    try {\n        return JSON.parse(readFileSync(configFilename));\n    } catch (err) {\n        const networkInterface = (() => {\n            try {\n                return findNetworkInterface();\n            } catch (err) {\n                return null;\n            }\n        })();\n        return {\n            display: 'kweb3',\n            url: `${host}/no-config?ip=${networkInterface && networkInterface.ip}`,\n        };\n    }\n})();\n\n\nif (['livestreamer', 'kweb3', 'chromium'].indexOf(config.display) === -1) {\n    config.display = 'kweb3';\n    save();\n}\n\n\nfunction save() {\n    writeFileSync(configFilename, JSON.stringify(config, null, 4));\n}\n\nexport function updateConfig(newConfig) {\n    if (deepEqual(config, newConfig)) {\n        return false;\n    }\n\n    config = newConfig;\n    save();\n    return true;\n}\n\nexport function getTime() {\n    return config.time;\n}\n\nexport function get() {\n    return config;\n}\n"]}