{"version":3,"sources":["../src/migrate.js"],"names":[],"mappings":";;;;;kBAIwB;;;;;;;;;;;;EAAT,SAAS,OAAT,CAAiB,eAAjB,EAAkC,UAAlC,EAA8C;AACzD,WAAO,IAAI,OAAJ,CAAY,CAAC,OAAD,EAAU,MAAV,KAAqB;AACpC,yBAAQ,CAAC,GAAE,SAAH,EAAa,YAAb,CAAR,EAAoC,CAAC,GAAD,EAAM,KAAN,KAAgB;AAChD,gBAAI,GAAJ,EAAS;AACL,uBAAO,OAAO,GAAP,CAAP,CADK;aAAT;;AAIA,kBACK,MADL,CACY,QAAQ,KAAK,KAAL,CAAW,CAAC,CAAD,CAAX,KAAmB,KAAnB,CADpB,CAEK,GAFL,CAES,SAAS,EAAE,IAAF,EAAQ,SAAS,mBAAmB,IAAnB,CAAwB,IAAxB,EAA8B,CAA9B,CAAT,GAAjB,CAFT,CAGK,MAHL,CAGY,QAAQ,gBAAG,KAAK,OAAL,EAAc,eAAjB,CAAR,CAHZ,CAIK,IAJL,CAIU,CAAC,CAAD,EAAI,CAAJ,KAAU,gBAAG,EAAE,OAAF,EAAW,EAAE,OAAF,CAAxB,CAJV,CAKK,OALL,CAKa,QAAQ;AACb,wBAAQ,GAAR,CAAY,IAAZ;;AADa,aAAR,CALb,CALgD;SAAhB,CAApC,CADoC;KAArB,CAAnB,CADyD;CAA9C","file":"migrate.js","sourcesContent":["import { gt, lt } from 'semver';\nimport { runScript } from 'scripts';\nimport { readdir } from 'fs';\n\nexport default function migrate(previousVersion, newVersion) {\n    return new Promise((resolve, reject) => {\n        readdir(`${__dirname}/../migrate/`, (err, files) => {\n            if (err) {\n                return reject(err);\n            }\n\n            files\n                .filter(file => file.slice(-3) === '.sh')\n                .map(file => ({ file, version: /([^_]+)(_.*).sh$/.exec(file)[1] }))\n                .filter(file => lt(file.version, previousVersion))\n                .sort((a, b) => gt(a.version, b.version))\n                .forEach(file => {\n                    console.log(file);\n                    // runScript(file.file, [], { cwd: `${__dirname}/../migrate/` });\n                });\n        });\n    });\n}\n"]}