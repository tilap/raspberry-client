{"version":3,"sources":["../src/config.js"],"names":[],"mappings":";;;;;QA2CgB,Y,GAAA,Y;QAUA,O,GAAA,O;QAIA,G,GAAA,G;;AAzDhB;;AACA;;;;AACA;;AACA;;;;;;AAEA,SAAS,aAAT,GAAyB;AACrB,UAAM,mBAAmB,CAAC,MAAM;AAC5B,YAAI;AACA,mBAAO,iCAAP;AACH,SAFD,CAEE,OAAO,GAAP,EAAY;AACV,mBAAO,IAAP;AACH;AACJ,KANwB,GAAzB;;AAQA,WAAO;AACH,iBAAS,OADN;AAEH,aAAK,CAAC,AAAD,eAAQ,cAAR,GAAwB,oBAAoB,iBAAiB,EAA7D,EAAgE,AAAhE;AAFF,KAAP;AAIH;;AAED,MAAM,iBAAiB,CAAC,AAAD,GAAG,SAAH,EAAa,oBAAb,CAAvB;AACA,IAAI,SAAS,CAAC,MAAM;AAChB,QAAI;AACA,eAAO,KAAK,KAAL,CAAW,sBAAa,cAAb,CAAX,CAAP;AACH,KAFD,CAEE,OAAO,GAAP,EAAY;AACV,eAAO,eAAP;AACH;AACJ,CANY,GAAb;;AAQA,IAAI,CAAC,OAAO,OAAZ,EAAqB;AACjB,aAAS,eAAT;AACH;;AAED,IAAI,CAAC,cAAD,EAAiB,OAAjB,EAA0B,UAA1B,EAAsC,OAAtC,CAA8C,OAAO,OAArD,MAAkE,CAAC,CAAvE,EAA0E;AACtE,WAAO,OAAP,GAAiB,OAAjB;AACA;AACH;;AAGD,SAAS,IAAT,GAAgB;AACZ,2BAAc,cAAd,EAA8B,KAAK,SAAL,CAAe,MAAf,EAAuB,IAAvB,EAA6B,CAA7B,CAA9B;AACH;;AAEM,SAAS,YAAT,CAAsB,SAAtB,EAAyC;AAC5C,QAAI,yBAAU,MAAV,EAAkB,SAAlB,CAAJ,EAAkC;AAC9B,eAAO,KAAP;AACH;;AAED,aAAS,SAAT;AACA;AACA,WAAO,IAAP;AACH;;AAEM,SAAS,OAAT,GAAmB;AACtB,WAAO,OAAO,IAAd;AACH;;AAEM,SAAS,GAAT,GAAe;AAClB,WAAO,MAAP;AACH","file":"config.js","sourcesContent":["import { readFileSync, writeFileSync } from 'fs';\nimport deepEqual from 'deep-equal';\nimport { host } from './argv';\nimport findNetworkInterface from './networkInterface';\n\nfunction defaultConfig() {\n    const networkInterface = (() => {\n        try {\n            return findNetworkInterface();\n        } catch (err) {\n            return null;\n        }\n    })();\n\n    return {\n        display: 'kweb3',\n        url: `${host}/no-config?ip=${networkInterface && networkInterface.ip}`,\n    };\n}\n\nconst configFilename = `${__dirname}/../data/config.json`;\nlet config = (() => {\n    try {\n        return JSON.parse(readFileSync(configFilename));\n    } catch (err) {\n        return defaultConfig();\n    }\n})();\n\nif (!config.display) {\n    config = defaultConfig();\n}\n\nif (['livestreamer', 'kweb3', 'chromium'].indexOf(config.display) === -1) {\n    config.display = 'kweb3';\n    save();\n}\n\n\nfunction save() {\n    writeFileSync(configFilename, JSON.stringify(config, null, 4));\n}\n\nexport function updateConfig(newConfig: Object) {\n    if (deepEqual(config, newConfig)) {\n        return false;\n    }\n\n    config = newConfig;\n    save();\n    return true;\n}\n\nexport function getTime() {\n    return config.time;\n}\n\nexport function get() {\n    return config;\n}\n"]}