{"version":3,"sources":["../src/screen.js"],"names":[],"mappings":";;;;;;QAgBgB;QAQA;;;;;;;;;;IArBJ;;;;;;;;AAEZ,MAAM,SAAS,+BAAkB,YAAlB,EAAgC,sBAAS,IAAT,CAAzC;;AAEC,IAAI,kDAAqB,OAArB;;;;;;AAKX,SAAS,KAAT,GAAiB;AACb,WAAO,wBAAU,aAAV,EAAyB,CAAC,OAAD,CAAzB,CAAP,CADa;CAAjB;;;;EAIO,SAAS,EAAT,GAAc;AACjB,WAAO,IAAP,CAAY,mBAAZ,EADiB;AAEjB,4BAAU,aAAV,EAAyB,CAAC,IAAD,CAAzB,EAFiB;AAGjB,YAZO,qBAYP,qBAAqB,IAArB,CAHiB;AAIjB,+BAAW,EAAE,aAAa,kBAAb,EAAb,EAJiB;AAKjB,YAAQ,KAAR,GALiB;CAAd;;;;EAQA,SAAS,GAAT,GAAe;AAClB,WAAO,IAAP,CAAY,oBAAZ,EADkB;AAElB,4BAAU,aAAV,EAAyB,CAAC,KAAD,CAAzB,EAFkB;AAGlB,YApBO,qBAoBP,qBAAqB,KAArB,CAHkB;AAIlB,+BAAW,EAAE,aAAa,kBAAb,EAAb,EAJkB;AAKlB,YAAQ,IAAR,GALkB;CAAf;;AAQP,IAAI,uBAAuB,IAAvB,EAA6B;AAC7B,YAAQ,KAAR,GAD6B;CAAjC","file":"screen.js","sourcesContent":["import { ConsoleLogger, LogLevel } from 'nightingale';\nimport { runScript, listenScript } from './scripts';\nimport { sendUpdate } from './tcp-client';\nimport * as display from './display';\n\nconst logger = new ConsoleLogger('app.screen', LogLevel.INFO);\n\nexport let currentScreenState = state();\n\n/**\n * @returns {string} on|off|unavailable\n */\nfunction state() {\n    return runScript('./screen.sh', ['state']);\n}\n\nexport function on() {\n    logger.info('turning screen on');\n    runScript('./screen.sh', ['on']);\n    currentScreenState = 'on';\n    sendUpdate({ screenState: currentScreenState });\n    display.start();\n}\n\nexport function off() {\n    logger.info('turning screen off');\n    runScript('./screen.sh', ['off']);\n    currentScreenState = 'off';\n    sendUpdate({ screenState: currentScreenState });\n    display.stop();\n}\n\nif (currentScreenState === 'on') {\n    display.start();\n}\n"]}