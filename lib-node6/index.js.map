{"version":3,"sources":["../src/index.js"],"names":[],"mappings":";;;;;QAcgB,I,GAAA,I;;AAdhB;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AACA;;;;;;AAEA,MAAM,SAAS,0BAAW,KAAX,CAAf;AACA,mCAAiB,kCAAjB;;AAEA,QAAQ,EAAR,CAAW,mBAAX,EAAgC,OAAO,OAAO,KAAP,CAAa,mBAAb,EAAkC,EAAE,GAAF,EAAlC,CAAvC;AACA,QAAQ,EAAR,CAAW,oBAAX,EAAiC,OAAO,OAAO,KAAP,CAAa,oBAAb,EAAmC,EAAE,GAAF,EAAnC,CAAxC;;AAEO,SAAS,IAAT,GAAgB;AACnB,YAAQ,GAAR,CAAY,CACR,oBADQ,EAER,oBAFQ,EAGR,uBAHQ,CAAZ,EAIG,IAJH,CAIQ,MAAM;AACV,gBAAQ,IAAR;AACH,KAND;AAOH;;AAED,QAAQ,EAAR,CAAW,QAAX,EAAqB,MAAM;AACvB;AACH,CAFD","file":"index.js","sourcesContent":["import { stop as stopDisplay } from './display';\nimport { close as clientClose } from './client';\nimport { close as serverClose } from './cli-server';\nimport './cron';\nimport './screen';\nimport Logger, { addGlobalHandler } from 'nightingale';\nimport ConsoleLogger from 'nightingale-console';\n\nconst logger = new Logger('app');\naddGlobalHandler(new ConsoleLogger());\n\nprocess.on('uncaughtException', err => logger.error('uncaughtException', { err }));\nprocess.on('unhandledRejection', err => logger.error('unhandledRejection', { err }));\n\nexport function exit() {\n    Promise.all([\n        stopDisplay(),\n        clientClose(),\n        serverClose(),\n    ]).then(() => {\n        process.exit();\n    });\n}\n\nprocess.on('SIGINT', () => {\n    exit();\n});\n\n"]}