{"version":3,"sources":["../src/cli.js"],"names":[],"mappings":";;;;;;;;AAEA,MAAM,OAAO,QAAQ,UAAR,EAAoB,QAAQ,IAAR,CAAa,KAAb,CAAmB,CAAnB,CAApB,CAAP;;;AAGN,MAAM,SAAS,+BAAkB,KAAlB,EAAyB,sBAAS,IAAT,CAAlC;;AAEN,MAAM,SAAS,iBAAT;AACN,MAAM,aAAa,gCAAa,MAAb,CAAb;;AAEN,WAAW,EAAX,CAAc,OAAd,EAAuB,OAAO;AAC1B,WAAO,KAAP,CAAa,GAAb,EAD0B;CAAP,CAAvB;;AAIA,OAAO,EAAP,CAAU,OAAV,EAAmB,OAAO;AACtB,WAAO,KAAP,CAAa,GAAb,EADsB;CAAP,CAAnB;;AAIA,OAAO,EAAP,CAAU,KAAV,EAAiB,MAAM;AACnB,WAAO,KAAP,CAAa,CAAC,YAAD,CAAb,EADmB;AAEnB,eAAW,GAAX,GAFmB;CAAN,CAAjB;;AAMA,OAAO,EAAP,CAAU,SAAV,EAAqB,MAAM;AACvB,WAAO,KAAP,CAAa,CAAC,SAAD,CAAb,EADuB;;AAGvB,eAAW,KAAX,CAAiB,IAAjB,EAHuB;CAAN,CAArB;;AAMA,WAAW,EAAX,CAAc,MAAd,EAAsB,QAAQ;AAC1B,QAAI,KAAK,IAAL,KAAc,MAAd,EAAsB;AACtB,gBAAQ,GAAR,CAAY,KAAK,MAAL,CAAZ,CADsB;AAEtB,eAAO,GAAP,GAFsB;KAA1B,MAGO,IAAI,KAAK,KAAL,EAAY;AACnB,gBAAQ,GAAR,CAAY,KAAK,KAAL,CAAZ,CADmB;AAEnB,eAAO,GAAP,GAFmB;KAAhB,MAGA;AACH,gBAAQ,GAAR,CAAY,IAAZ,EADG;KAHA;CAJW,CAAtB;;AAaA,OAAO,OAAP,CAAe,CAAC,GAAE,SAAH,EAAa,UAAb,CAAf","file":"cli.js","sourcesContent":["import { Socket } from 'net';\nimport { ConsoleLogger, LogLevel } from 'nightingale';\nconst argv = require('minimist')(process.argv.slice(2));\nimport { createStream } from 'objectstream';\n\nconst logger = new ConsoleLogger('cli', LogLevel.INFO);\n\nconst socket = new Socket();\nconst jsonStream = createStream(socket);\n\njsonStream.on('error', err => {\n    logger.error(err);\n});\n\nsocket.on('error', err => {\n    logger.error(err);\n});\n\nsocket.on('end', () => {\n    logger.debug(`socket ended`);\n    jsonStream.end();\n});\n\n\nsocket.on('connect', () => {\n    logger.debug(`connected`);\n\n    jsonStream.write(argv);\n});\n\njsonStream.on('data', data => {\n    if (data.type === 'done') {\n        console.log(data.result);\n        socket.end();\n    } else if (data.error) {\n        console.log(data.error);\n        socket.end();\n    } else {\n        console.log(data);\n    }\n});\n\n\nsocket.connect(`${__dirname}/../socket`);\n"]}